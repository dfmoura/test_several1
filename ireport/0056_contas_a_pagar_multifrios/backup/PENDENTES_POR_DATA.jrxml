<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="extrato_carteira_1041" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="10" bottomMargin="10">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="45"/>
	<property name="ireport.y" value="0"/>
	<property name="ireport.definition"/>
	<parameter name="CODEMP" class="java.math.BigDecimal">
		<property name="nomeTabela" value="TSIEMP"/>
		<parameterDescription><![CDATA[Empresa]]></parameterDescription>
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="DTVENCINI" class="java.sql.Timestamp">
		<parameterDescription><![CDATA[Vencimento Inicial]]></parameterDescription>
	</parameter>
	<parameter name="DTVENCFIM" class="java.sql.Timestamp">
		<parameterDescription><![CDATA[Vencimento Final]]></parameterDescription>
	</parameter>
	<queryString>
		<![CDATA[SELECT FIN.CODEMP,
       FIN.DTVENC,
       TO_CHAR(FIN.DTNEG,'DD/MM/YY') AS "Dt.Emis",
       TO_CHAR(FIN.DTVENC,'DD/MM/YY') AS "Dt.Venc.",
       EMP.NOMEFANTASIA,
       EMP.RAZAOSOCIAL AS RAZAO_SOCIAL_EMP,
       FIN.CODPARC,
       PAR.RAZAOSOCIAL AS RAZAO_SOCIAL_PARC,
       PAR.NOMEPARC,
       FIN.HISTORICO,
       FIN.NUMNOTA,
       FIN.CODTIPTIT,
       TIT.DESCRTIPTIT,
      CASE WHEN FIN.CODTIPTIT IN (3,5,13) THEN FIN.NOSSONUM
        ELSE NULL
      END AS "Nº Cheque",
       CASE WHEN (FIN.HISTORICO IS NOT NULL OR FIN.HISTORICO = ' ') THEN FIN.HISTORICO
            ELSE NAT.DESCRNAT
        END AS "HISTORICO2",
       TO_NUMBER(FIN.VLRDESDOB) AS VLRDESDOB,
       FIN.DESDOBRAMENTO,
       (SELECT CODUSU||' - '|| NOMEUSU AS USUARIO  FROM TSIUSU WHERE CODUSU = STP_GET_CODUSULOGADO) USU_IMPRIMIU
,TO_NUMBER((FIN.VLRDESDOB+FIN.VLRMULTA+FIN.VLRJURO)-FIN.VLRDESC)AS VLR_LIQUIDO
FROM TGFFIN FIN,
     TGFPAR PAR,
     TSIEMP EMP,
     TGFTIT TIT,
     TGFTOP TOP,
     TGFNAT NAT
WHERE FIN.CODPARC = PAR.CODPARC
  AND FIN.CODEMP  = EMP.CODEMP
  AND FIN.CODTIPTIT = TIT.CODTIPTIT
  AND FIN.CODTIPOPER = TOP.CODTIPOPER
  AND FIN.DHTIPOPER  = TOP.DHALTER
  AND FIN.CODNAT = NAT.CODNAT
  AND (FIN.RECDESP = '-1'
  AND FIN.PROVISAO = 'N'
  AND FIN.DHBAIXA IS NULL
   AND (FIN.DTVENC BETWEEN $P{DTVENCINI} AND $P{DTVENCFIM})
  AND (FIN.CODEMP = $P{CODEMP} OR NVL($P{CODEMP},-1)=-1))
ORDER BY FIN.CODEMP,
         FIN.DTVENC,
         FIN.DTALTER]]>
	</queryString>
	<field name="CODEMP" class="java.math.BigDecimal"/>
	<field name="DTVENC" class="java.sql.Timestamp"/>
	<field name="Dt.Emis" class="java.lang.String"/>
	<field name="Dt.Venc." class="java.lang.String"/>
	<field name="NOMEFANTASIA" class="java.lang.String"/>
	<field name="RAZAO_SOCIAL_EMP" class="java.lang.String"/>
	<field name="CODPARC" class="java.math.BigDecimal"/>
	<field name="RAZAO_SOCIAL_PARC" class="java.lang.String"/>
	<field name="NOMEPARC" class="java.lang.String"/>
	<field name="HISTORICO" class="java.lang.String"/>
	<field name="NUMNOTA" class="java.math.BigDecimal"/>
	<field name="CODTIPTIT" class="java.math.BigDecimal"/>
	<field name="DESCRTIPTIT" class="java.lang.String"/>
	<field name="Nº Cheque" class="java.lang.String"/>
	<field name="HISTORICO2" class="java.lang.String"/>
	<field name="VLRDESDOB" class="java.math.BigDecimal"/>
	<field name="DESDOBRAMENTO" class="java.lang.String"/>
	<field name="USU_IMPRIMIU" class="java.lang.String"/>
	<field name="VLR_LIQUIDO" class="java.math.BigDecimal"/>
	<variable name="VLRDESDOB_1" class="java.math.BigDecimal" resetType="Group" resetGroup="EMP" calculation="Sum">
		<variableExpression><![CDATA[$F{VLRDESDOB}]]></variableExpression>
	</variable>
	<variable name="VLRDESDOB_2" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{VLRDESDOB}]]></variableExpression>
	</variable>
	<variable name="VLR_LIQUIDO_1" class="java.math.BigDecimal" resetType="Group" resetGroup="EMP" calculation="Sum">
		<variableExpression><![CDATA[$F{VLR_LIQUIDO}]]></variableExpression>
	</variable>
	<variable name="VLR_LIQUIDO_2" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{VLR_LIQUIDO}]]></variableExpression>
	</variable>
	<group name="EMP" isStartNewPage="true" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
		<groupHeader>
			<band height="34">
				<textField isBlankWhenNull="true">
					<reportElement x="1" y="0" width="507" height="16"/>
					<textElement>
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA["Empresa: "+$F{CODEMP}+" - "+$F{NOMEFANTASIA}+" / "+$F{RAZAO_SOCIAL_EMP}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement mode="Opaque" x="340" y="22" width="77" height="9" backcolor="#CCCCCC"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Titulo]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="188" y="22" width="124" height="9" backcolor="#CCCCCC"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Descrição]]></text>
				</staticText>
				<line>
					<reportElement x="0" y="33" width="554" height="1"/>
				</line>
				<staticText>
					<reportElement mode="Opaque" x="508" y="22" width="46" height="9" backcolor="#CCCCCC"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Vlr.Liquido]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="1" y="22" width="50" height="9" backcolor="#CCCCCC"/>
					<textElement verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Vencimento]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="51" y="22" width="137" height="9" backcolor="#CCCCCC"/>
					<textElement verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[         Fornecedor]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="295" y="22" width="52" height="9" backcolor="#CCCCCC"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Data]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="417" y="22" width="45" height="9" backcolor="#CCCCCC"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Documento]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="462" y="22" width="46" height="9" backcolor="#CCCCCC"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="7" isBold="true"/>
					</textElement>
					<text><![CDATA[Vlr. Bruto]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="21">
				<line>
					<reportElement x="312" y="1" width="242" height="1"/>
				</line>
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="439" y="4" width="68" height="12"/>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{VLRDESDOB_1}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="265" y="4" width="170" height="13"/>
					<textElement textAlignment="Right">
						<font size="7" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA["Total da Empresa: "]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="0" y="4" width="95" height="13"/>
					<textElement>
						<font size="7" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA["Qtd. Registros: "+$V{EMP_COUNT}]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00" isBlankWhenNull="true">
					<reportElement x="507" y="4" width="48" height="12"/>
					<textElement textAlignment="Right">
						<font size="7"/>
					</textElement>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{VLR_LIQUIDO_1}]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="41" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="41"/>
			</rectangle>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="225" y="26" width="60" height="12"/>
				<textElement textAlignment="Center">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.sql.Timestamp"><![CDATA[$P{DTVENCINI}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="78" y="3" width="362" height="18"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[35 - Contas a Pagar(Pendentes por Data)]]></text>
			</staticText>
			<staticText>
				<reportElement x="284" y="26" width="19" height="12"/>
				<textElement textAlignment="Center">
					<font size="9" isBold="false"/>
				</textElement>
				<text><![CDATA[até]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="301" y="26" width="64" height="12"/>
				<textElement textAlignment="Center">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.sql.Timestamp"><![CDATA[$P{DTVENCFIM}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="182" y="26" width="41" height="12"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Período: ]]></text>
			</staticText>
			<textField>
				<reportElement x="437" y="2" width="110" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="547" y="2" width="8" height="10"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="11" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="51" y="0" width="128" height="9"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{RAZAO_SOCIAL_PARC}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="340" y="0" width="77" height="9"/>
				<textElement textAlignment="Center">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DESCRTIPTIT}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yy" isBlankWhenNull="true">
				<reportElement x="1" y="0" width="50" height="9"/>
				<textElement>
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Dt.Venc.}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yy" isBlankWhenNull="true">
				<reportElement x="300" y="0" width="40" height="9"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{Dt.Emis}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="461" y="0" width="46" height="9"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{VLRDESDOB}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="182" y="0" width="118" height="9"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{HISTORICO}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="417" y="0" width="45" height="9"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{NUMNOTA}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="507" y="0" width="46" height="9"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{VLR_LIQUIDO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="18" splitType="Stretch">
			<textField>
				<reportElement x="437" y="4" width="110" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="547" y="4" width="8" height="10"/>
				<textElement>
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy HH:mm:ss">
				<reportElement x="32" y="4" width="106" height="10"/>
				<textElement verticalAlignment="Top">
					<font size="7" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="2" y="4" width="30" height="10"/>
				<textElement verticalAlignment="Top">
					<font size="6" isBold="true"/>
				</textElement>
				<text><![CDATA[Emissão:]]></text>
			</staticText>
			<line>
				<reportElement x="1" y="3" width="554" height="1"/>
			</line>
			<textField isBlankWhenNull="true">
				<reportElement x="238" y="4" width="153" height="10"/>
				<textElement verticalAlignment="Middle">
					<font size="7" isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Emitido por: "+$F{USU_IMPRIMIU}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="22" splitType="Stretch">
			<line>
				<reportElement x="0" y="3" width="554" height="1"/>
			</line>
			<staticText>
				<reportElement x="266" y="8" width="169" height="12"/>
				<textElement textAlignment="Right">
					<font size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL GERAL:]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="439" y="7" width="68" height="13"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{VLRDESDOB_2}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="7" width="95" height="12"/>
				<textElement>
					<font size="7" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Qtd. Registros: "+$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="507" y="7" width="47" height="13"/>
				<textElement textAlignment="Right">
					<font size="7"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{VLR_LIQUIDO_2}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
